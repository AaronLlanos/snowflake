<!DOCTYPE html>
<html>
<head>
  <title>authReducer-test.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../", thisFile = "Users/barton/projects/MFV/snowflake-pullrequest/snowflake//reducers/auth/__tests__/authReducer-test.js", defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#authreducer-test.js">authReducer-test.js</a>
      </div>
      <div class="heading h2">
        <a href="#imports">Imports</a>
      </div>
      <div class="heading h2">
        <a href="#class%20under%20test">Class under test</a>
      </div>
      <div class="heading h2">
        <a href="#tests">Tests</a>
      </div>
      <div class="heading h3">
        <a href="#sessiontoken%20...all%20requests%20in%20general">SessionToken ...all requests in general</a>
      </div>
      <div class="heading h3">
        <a href="#signup%20failure%20will%20have%20an%20error%20associated%20with%20it">Signup failure will have an error associated with it</a>
      </div>
      <div class="heading h3">
        <a href="#the%20user%20logs%20out">The user logs out</a>
      </div>
      <div class="heading h4">
        <a href="#get%20a%20valid%20state">Get a valid state</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20valid%20to%20logout">form is valid to logout</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20valid%20to%20logout%20even%20with%20form%20fields">form is valid to logout even with form fields</a>
      </div>
      <div class="heading h3">
        <a href="#the%20user%20wants%20to%20reset%20their%20password">The user wants to reset their password</a>
      </div>
      <div class="heading h4">
        <a href="#before%20each">before each</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20not%20valid%20with%20empty%20field">form is not valid with empty field</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20valid%20with%20valid%20email">form is valid with valid email</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20invalid%20with%20invalid%20email">form is invalid with invalid email</a>
      </div>
      <div class="heading h3">
        <a href="#the%20user%20logs%20in">The user logs in</a>
      </div>
      <div class="heading h4">
        <a href="#get%20a%20valid%20state">Get a valid state</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20not%20valid%20with%20empty%20fields">form is not valid with empty fields</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20%20valid%20with%20valid%20fields">form is  valid with valid fields</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20invalid%20with%20invalid%20fields">form is invalid with invalid fields</a>
      </div>
      <div class="heading h3">
        <a href="#the%20user%20registers">The user registers</a>
      </div>
      <div class="heading h4">
        <a href="#get%20a%20valid%20state">Get a valid state</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20not%20valid%20with%20empty%20fields">form is not valid with empty fields</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20%20valid%20with%20valid%20fields">form is  valid with valid fields</a>
      </div>
      <div class="heading h4">
        <a href="#form%20is%20%20invalid%20with%20invalid%20field">form is  invalid with invalid field</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="authreducer-test.js">
  <h1>
    <a href="#authreducer-test.js" name="authreducer-test.js" class="pilcrow">&#182;</a>
    authReducer-test.js
  </h1>
</div>

  </div>
  <div class="body"><p>Test the authReducer's only function, like all reducers, where the
state and action are passed in.</p>

<p>This will confirm that given a specific action with a type and
payload, that the state object is modified accordingly.</p>

<p><em>Note</em>: in this app,<code>state</code> is an Immutable.js object </p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="nx">jest</span><span class="p">.</span><span class="nx">autoMockOff</span><span class="p">();</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="imports">
  <h2>
    <a href="#imports" name="imports" class="pilcrow">&#182;</a>
    Imports
  </h2>
</div>

  </div>
  <div class="body"><p>These actions are sufficient to test the reducer as many of the
case statements are shared amongst the actions.</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kr">const</span> <span class="p">{</span>
  <span class="nx">SESSION_TOKEN_REQUEST</span><span class="p">,</span>
  <span class="nx">SESSION_TOKEN_SUCCESS</span><span class="p">,</span>
  <span class="nx">SESSION_TOKEN_FAILURE</span><span class="p">,</span>

  <span class="nx">LOGOUT</span><span class="p">,</span>
  <span class="nx">LOGIN</span><span class="p">,</span>
  <span class="nx">REGISTER</span><span class="p">,</span>
  <span class="nx">FORGOT_PASSWORD</span><span class="p">,</span>
  
  <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>

  <span class="nx">SIGNUP_FAILURE</span>
<span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../../../lib/constants&#39;</span><span class="p">).</span><span class="k">default</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="class%20under%20test">
  <h2>
    <a href="#class%20under%20test" name="class%20under%20test" class="pilcrow">&#182;</a>
    Class under test
  </h2>
</div>

  </div>
  <div class="body"><p>Note that since autoMockOff has been called, we will get the actual
formValidation and fieldValidation objects, so we're testing them
as well</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kr">const</span>  <span class="nx">authReducer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../authReducer&#39;</span><span class="p">).</span><span class="k">default</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="tests">
  <h2>
    <a href="#tests" name="tests" class="pilcrow">&#182;</a>
    Tests
  </h2>
</div>

  </div>
  <div class="body"><p>authReducer</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;authReducer&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="sessiontoken%20...all%20requests%20in%20general">
  <h3>
    <a href="#sessiontoken%20...all%20requests%20in%20general" name="sessiontoken%20...all%20requests%20in%20general" class="pilcrow">&#182;</a>
    SessionToken ...all requests in general
  </h3>
</div>

  </div>
  <div class="body"><p>In general, all requests will have fetching true before
actually performing the request,and followed
by either a success or failure action that signals the request
has ended and the fetching flag can be toggled.</p>

<p><em>Note</em>: these tests call the <code>authReducer</code> with an
<code>undefined</code> state so that the reducer will return a valid state.</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;SESSION-TOKEN-REQUEST&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;starts fetching&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">SESSION_TOKEN_REQUEST</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isFetching</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">error</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">});</span>
    
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;finishes fetching on success&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">SESSION_TOKEN_SUCCESS</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isFetching</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">error</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">});</span>
    
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;finishes fetching on failure&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">SESSION_TOKEN_FAILURE</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isFetching</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">error</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span><span class="c1">//Session-token-request</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="signup%20failure%20will%20have%20an%20error%20associated%20with%20it">
  <h3>
    <a href="#signup%20failure%20will%20have%20an%20error%20associated%20with%20it" name="signup%20failure%20will%20have%20an%20error%20associated%20with%20it" class="pilcrow">&#182;</a>
    Signup failure will have an error associated with it
  </h3>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;SIGNUP_FAILURE&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;Finish fetching with error&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">SIGNUP_FAILURE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">error</span><span class="o">:</span> <span class="s1">&#39;error&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isFetching</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">error</span><span class="p">).</span><span class="nx">toBeDefined</span><span class="p">();</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">error</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">);</span>
    <span class="p">});</span>


  <span class="p">});</span><span class="c1">//SIGNUP_FAILURE</span>
  

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="the%20user%20logs%20out">
  <h3>
    <a href="#the%20user%20logs%20out" name="the%20user%20logs%20out" class="pilcrow">&#182;</a>
    The user logs out
  </h3>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;LOGOUT&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">initialState</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="get%20a%20valid%20state">
  <h4>
    <a href="#get%20a%20valid%20state" name="get%20a%20valid%20state" class="pilcrow">&#182;</a>
    Get a valid state
  </h4>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;dummy&#39;</span>
      <span class="p">};</span>
      <span class="nx">initialState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20valid%20to%20logout">
  <h4>
    <a href="#form%20is%20valid%20to%20logout" name="form%20is%20valid%20to%20logout" class="pilcrow">&#182;</a>
    form is valid to logout
  </h4>
</div>

  </div>
  <div class="body"><p>Should have a valid form and in the Logged out state</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is valid to logout&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">LOGOUT</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">LOGOUT</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20valid%20to%20logout%20even%20with%20form%20fields">
  <h4>
    <a href="#form%20is%20valid%20to%20logout%20even%20with%20form%20fields" name="form%20is%20valid%20to%20logout%20even%20with%20form%20fields" class="pilcrow">&#182;</a>
    form is valid to logout even with form fields
  </h4>
</div>

  </div>
  <div class="body"><p>Even if the form were to have some data, once they log out that
form should be cleared, valid and in the Logged out state</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is valid to logout even with form fields&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">LOGOUT</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">init</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">withFields</span> <span class="o">=</span>
            <span class="nx">init</span><span class="p">.</span><span class="nx">setIn</span><span class="p">([</span><span class="s1">&#39;form&#39;</span><span class="p">,</span><span class="s1">&#39;fields&#39;</span><span class="p">,</span><span class="s1">&#39;username&#39;</span><span class="p">],</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">setIn</span><span class="p">([</span><span class="s1">&#39;form&#39;</span><span class="p">,</span><span class="s1">&#39;fields&#39;</span><span class="p">,</span><span class="s1">&#39;email&#39;</span><span class="p">],</span><span class="s1">&#39;notvalid&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">setIn</span><span class="p">([</span><span class="s1">&#39;form&#39;</span><span class="p">,</span><span class="s1">&#39;fields&#39;</span><span class="p">,</span><span class="s1">&#39;password&#39;</span><span class="p">],</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">setIn</span><span class="p">([</span><span class="s1">&#39;form&#39;</span><span class="p">,</span><span class="s1">&#39;fields&#39;</span><span class="p">,</span><span class="s1">&#39;passwordAgain&#39;</span><span class="p">],</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">withFields</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">LOGOUT</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">username</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">email</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">password</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">passwordAgain</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="the%20user%20wants%20to%20reset%20their%20password">
  <h3>
    <a href="#the%20user%20wants%20to%20reset%20their%20password" name="the%20user%20wants%20to%20reset%20their%20password" class="pilcrow">&#182;</a>
    The user wants to reset their password
  </h3>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;FORGOT_PASSWORD&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">initialState</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="before%20each">
  <h4>
    <a href="#before%20each" name="before%20each" class="pilcrow">&#182;</a>
    before each
  </h4>
</div>

  </div>
  <div class="body"><p>get a valid initial state</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;dummy&#39;</span>
      <span class="p">};</span>
      <span class="nx">initialState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20not%20valid%20with%20empty%20field">
  <h4>
    <a href="#form%20is%20not%20valid%20with%20empty%20field" name="form%20is%20not%20valid%20with%20empty%20field" class="pilcrow">&#182;</a>
    form is not valid with empty field
  </h4>
</div>

  </div>
  <div class="body"><p>A value is required</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is not valid with empty field&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">FORGOT_PASSWORD</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">FORGOT_PASSWORD</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20valid%20with%20valid%20email">
  <h4>
    <a href="#form%20is%20valid%20with%20valid%20email" name="form%20is%20valid%20with%20valid%20email" class="pilcrow">&#182;</a>
    form is valid with valid email
  </h4>
</div>

  </div>
  <div class="body"><p>Verify a valid email address, one that passes the
fieldValidation rule, should show the form as valid</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is valid with valid email&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">emailFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;bar@ton.com&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">emailState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span>
                                   <span class="nx">emailFieldChangeAction</span><span class="p">);</span>

      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">FORGOT_PASSWORD</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">emailState</span><span class="p">,</span>
                             <span class="nx">action</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">FORGOT_PASSWORD</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20invalid%20with%20invalid%20email">
  <h4>
    <a href="#form%20is%20invalid%20with%20invalid%20email" name="form%20is%20invalid%20with%20invalid%20email" class="pilcrow">&#182;</a>
    form is invalid with invalid email
  </h4>
</div>

  </div>
  <div class="body"><p>The email field should be a valid email address with respect to
the format, but under no circumstances should the user receive
feedback that the email address exists within the app</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is invalid with invalid email&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">emailFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;bar@ton&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">emailState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span>
                                   <span class="nx">emailFieldChangeAction</span><span class="p">);</span>

      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">FORGOT_PASSWORD</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">emailState</span><span class="p">,</span>
                             <span class="nx">action</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">FORGOT_PASSWORD</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span> 

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="the%20user%20logs%20in">
  <h3>
    <a href="#the%20user%20logs%20in" name="the%20user%20logs%20in" class="pilcrow">&#182;</a>
    The user logs in
  </h3>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;LOGIN&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">initialState</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="get%20a%20valid%20state">
  <h4>
    <a href="#get%20a%20valid%20state" name="get%20a%20valid%20state" class="pilcrow">&#182;</a>
    Get a valid state
  </h4>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;dummy&#39;</span>
      <span class="p">};</span>
      <span class="nx">initialState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20not%20valid%20with%20empty%20fields">
  <h4>
    <a href="#form%20is%20not%20valid%20with%20empty%20fields" name="form%20is%20not%20valid%20with%20empty%20fields" class="pilcrow">&#182;</a>
    form is not valid with empty fields
  </h4>
</div>

  </div>
  <div class="body"><p>empty fields are not allowed</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is not valid with empty fields&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">LOGIN</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">LOGIN</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20%20valid%20with%20valid%20fields">
  <h4>
    <a href="#form%20is%20%20valid%20with%20valid%20fields" name="form%20is%20%20valid%20with%20valid%20fields" class="pilcrow">&#182;</a>
    form is  valid with valid fields
  </h4>
</div>

  </div>
  <div class="body"><p>provide valid input and the form should be valid</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is  valid with valid fields&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      
      <span class="kr">const</span> <span class="nx">userNameFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;barton&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kr">const</span> <span class="nx">passwordFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;Bart0n!&#39;</span><span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">let</span> <span class="nx">userNameState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span>
                                      <span class="nx">userNameFieldChangeAction</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">passwordState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">userNameState</span><span class="p">,</span>
                                      <span class="nx">passwordFieldChangeAction</span><span class="p">);</span>
      
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">LOGIN</span>
      <span class="p">};</span>

      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">passwordState</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">LOGIN</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">usernameHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">passwordHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20invalid%20with%20invalid%20fields">
  <h4>
    <a href="#form%20is%20invalid%20with%20invalid%20fields" name="form%20is%20invalid%20with%20invalid%20fields" class="pilcrow">&#182;</a>
    form is invalid with invalid fields
  </h4>
</div>

  </div>
  <div class="body"><p>If the fields are invalid, the fieldValidation and
formValidation will flag as such</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is invalid with invalid fields&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      
      <span class="kr">const</span> <span class="nx">userNameFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;bart&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kr">const</span> <span class="nx">passwordFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;Bart!&#39;</span><span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">let</span> <span class="nx">userNameState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span>
                                      <span class="nx">userNameFieldChangeAction</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">passwordState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">userNameState</span><span class="p">,</span>
                                      <span class="nx">passwordFieldChangeAction</span><span class="p">);</span>
      
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">LOGIN</span>
      <span class="p">};</span>

      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">passwordState</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">LOGIN</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">usernameHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">passwordHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span><span class="c1">//LOGIN</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="the%20user%20registers">
  <h3>
    <a href="#the%20user%20registers" name="the%20user%20registers" class="pilcrow">&#182;</a>
    The user registers
  </h3>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;REGISTER&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">initialState</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="get%20a%20valid%20state">
  <h4>
    <a href="#get%20a%20valid%20state" name="get%20a%20valid%20state" class="pilcrow">&#182;</a>
    Get a valid state
  </h4>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;dummy&#39;</span>
      <span class="p">};</span>
      <span class="nx">initialState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20not%20valid%20with%20empty%20fields">
  <h4>
    <a href="#form%20is%20not%20valid%20with%20empty%20fields" name="form%20is%20not%20valid%20with%20empty%20fields" class="pilcrow">&#182;</a>
    form is not valid with empty fields
  </h4>
</div>

  </div>
  <div class="body"><p>no data, not valid</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is not valid with empty fields&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">REGISTER</span>
      <span class="p">};</span>
      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">REGISTER</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20%20valid%20with%20valid%20fields">
  <h4>
    <a href="#form%20is%20%20valid%20with%20valid%20fields" name="form%20is%20%20valid%20with%20valid%20fields" class="pilcrow">&#182;</a>
    form is  valid with valid fields
  </h4>
</div>

  </div>
  <div class="body"><p>The registration UI requires 4 valid fields before the form is
considered valid.</p>

<p>Provide valid input and get a valid form</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is  valid with valid fields&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">userNameFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;barton&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kr">const</span> <span class="nx">emailFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;bar@ton.com&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kr">const</span> <span class="nx">passwordFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;Bart0n!&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kr">const</span> <span class="nx">passwordAgainFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;passwordAgain&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;Bart0n!&#39;</span><span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">let</span> <span class="nx">userNameState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span>
                                      <span class="nx">userNameFieldChangeAction</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">emailState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">userNameState</span><span class="p">,</span>
                                   <span class="nx">emailFieldChangeAction</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">passwordState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">emailState</span><span class="p">,</span>
                                      <span class="nx">passwordFieldChangeAction</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">passwordAgainState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">passwordState</span><span class="p">,</span>
                                           <span class="nx">passwordAgainFieldChangeAction</span><span class="p">);</span>
      
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">REGISTER</span>
      <span class="p">};</span>

      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">passwordAgainState</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">REGISTER</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">usernameHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">emailHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">passwordHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">passwordAgainHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="form%20is%20%20invalid%20with%20invalid%20field">
  <h4>
    <a href="#form%20is%20%20invalid%20with%20invalid%20field" name="form%20is%20%20invalid%20with%20invalid%20field" class="pilcrow">&#182;</a>
    form is  invalid with invalid field
  </h4>
</div>

  </div>
  <div class="body"><p>Bad data in, invalid form out!</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;form is  invalid with invalid fields&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">userNameFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;bart&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kr">const</span> <span class="nx">emailFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;barton&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kr">const</span> <span class="nx">passwordFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;Bart!&#39;</span><span class="p">}</span>
      <span class="p">};</span>
      <span class="kr">const</span> <span class="nx">passwordAgainFieldChangeAction</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">ON_AUTH_FORM_FIELD_CHANGE</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="s1">&#39;passwordAgain&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;Ba!&#39;</span><span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">let</span> <span class="nx">userNameState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">initialState</span><span class="p">,</span>
                                      <span class="nx">userNameFieldChangeAction</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">emailState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">userNameState</span><span class="p">,</span>
                                   <span class="nx">emailFieldChangeAction</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">passwordState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">emailState</span><span class="p">,</span>
                                      <span class="nx">passwordFieldChangeAction</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">passwordAgainState</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">passwordState</span><span class="p">,</span>
                                           <span class="nx">passwordAgainFieldChangeAction</span><span class="p">);</span>
      
      <span class="kr">const</span> <span class="nx">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">REGISTER</span>
      <span class="p">};</span>

      <span class="kd">let</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">authReducer</span><span class="p">(</span><span class="nx">passwordAgainState</span><span class="p">,</span> <span class="nx">action</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">state</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">REGISTER</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">usernameHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">emailHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">passwordHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">passwordAgainHasError</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      
    <span class="p">});</span>

  <span class="p">});</span><span class="c1">//REGISTER</span>
<span class="p">});</span><span class="c1">//authReducer</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
